# codex_summary.py 요약

## 역할
- Codex CLI와 통신해 게시물 텍스트/이미지를 한국어 요약으로 변환한다.
- 스트리밍 형태의 JSON 이벤트를 파싱해 완성된 응답을 재조합한다.
- 요약 실패, 타임아웃 등의 예외를 `SummaryError`로 감싸 상위 레이어에 전달한다.

## 핵심 구성 요소
- **`SummaryError`**: Codex 호출 실패를 표현하는 예외 클래스.
- **`CodexConfig`**: 모델명, 타임아웃, 텍스트 길이 제한, 디버그 옵션을 담는 데이터클래스.
- **`summarise_with_codex`**: Codex CLI 명령을 실행하고, 스트리밍 결과를 모아 요약 문자열을 반환.

## 외부 의존성
- `subprocess`: CLI 실행과 타임아웃 관리.
- `json`: Codex CLI가 출력하는 JSON 줄 단위 메시지 파싱.
- `textwrap`: 프롬프트 포맷.

## 운영 시 유의 사항
- `config.max_text_length`를 초과하는 텍스트는 자동으로 잘라내고 말줄임표를 붙인다.
- `config.debug`가 활성화되면 표준 에러로 프롬프트와 요약 결과가 출력되므로 로깅 기준에 따라 제어해야 한다.
- Codex CLI 설치 및 인증 정보가 사전에 설정돼 있어야 한다.

## 확장 아이디어
- 요약 프롬프트를 소스별로 다르게 적용할 수 있도록 외부 설정을 주입.
- Codex 실패 시 대체 모델로 재시도하는 백업 전략 구현.
- 이미지 경로 외에도 캡션/메타 정보를 함께 전달하도록 인터페이스 확장.
