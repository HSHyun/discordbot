# main.py 요약

## 역할
- PostgreSQL에서 요약된 게시물 상위 N개를 조회해 디스코드 채널에 Embed 형태로 게시한다.
- Discord 봇 명령(`latest`)을 제공하며, 사용자가 요청할 때마다 최신 요약을 전달한다.

## 핵심 흐름
1. `.env` 파일에서 디스코드 토큰과 DB 정보를 불러와 환경 변수를 초기화한다.
2. `fetch_top_posts()`가 `item_summary`에서 최신 요약을 조인해 `PostSummary` 데이터클래스로 변환한다.
3. `build_field_value()`가 요약, 원문 링크, 메타데이터(추천/조회/댓글 수 등)를 임베드 필드 문자열로 구성한다.
4. `create_bot()`이 Discord 봇을 생성하고 `/latest` 명령을 등록한다.
5. 명령 실행 시 데이터베이스에서 게시물을 가져와 Embed를 생성하고 채널에 전송한다.

## 외부 의존성
- `discord.py`: 봇 이벤트와 Slash Command 구현.
- `psycopg2-binary`: PostgreSQL 쿼리 실행.

## 운영 시 유의 사항
- 디스코드 토큰(`DISCORD_TOKEN`)과 DB 접속 정보는 `.env` 또는 환경 변수로 제공해야 한다.
- Embed 필드 길이 제한을 고려해 요약과 메타 정보를 자동으로 잘라내도록 처리되어 있다.
- `item_summary`에 요약이 존재하지 않으면 봇은 “요약된 게시물이 없습니다.” 메시지를 반환한다.

## 확장 아이디어
- 중요 키워드를 감지해 별도의 채널로 알림을 보내는 명령 추가.
- 게시물 상세 링크와 이미지 썸네일을 Embed에 포함.
- 관리자용 명령(소스 활성화/비활성화, 최근 에러 조회 등) 확장.
