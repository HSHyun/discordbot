# test_reddit_summary.py 요약

## 역할
- Reddit 게시물 하나를 골라 Gemini 요약 파이프라인을 빠르게 검증하는 테스트 스크립트.
- 기존 `store_reddit_posts.py`에서 사용하는 함수들을 재사용하여 실제 파이프라인과 동일한 입력을 생성한다.

## 핵심 흐름
1. `.env`를 로드해 Gemini 모델 설정을 구성한다.
2. `--url`이 지정되면 해당 게시물을 API로 바로 조회하고, 없으면 기본 서브레딧 목록 중 하나에서 최신 게시물을 가져온다.
3. 비디오 게시물이나 비디오 URL이 포함된 게시물은 자동으로 건너뛴다.
4. 이미지 최대 5장을 다운로드해 임시 위치(`data/test-assets/reddit/{subreddit}`)에 저장하고, 댓글 메타데이터를 콘솔에 출력한다.
5. Gemini 요약 결과와 입력 텍스트, 이미지 경로, 상위 댓글 스니펫을 콘솔에 표시한다.

## 주요 CLI 옵션
- `--subreddit`: 기본 서브레딧 대신 다른 대상을 지정.
- `--url`: 특정 게시물의 전체 URL.
- `--limit`: 최신 게시물을 탐색할 때 가져올 수량(기본 25).
- `--max-images`: 요약에 포함할 이미지 최대 개수(기본 5).
- `--keep-assets`: 다운로드한 이미지 파일을 유지.

## 운영 시 유의 사항
- OAuth 자격 증명(`REDDIT_CLIENT_ID` 등)과 Gemini API 키가 설정돼 있어야 한다.
- 테스트 중 생성된 이미지는 기본적으로 삭제되며, 이 스크립트는 DB를 수정하지 않는다.
- 댓글은 `metadata.comments`에 포함된 상위 50개(깊이 2 단계)를 가져와 출력한다.

## 확장 아이디어
- 요약 결과를 파일로 저장해 회귀 테스트에 활용.
- 댓글을 요약 입력에 직접 포함하는 실험 모드 추가.
- 여러 서브레딧을 일괄 테스트하는 배치 옵션 구현.
